{"ast":null,"code":"var _jsxFileName = \"/Users/user/Desktop/REACT/pamoka/src/pages/shop/shop.component.jsx\";\nimport React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport { useParams } from \"react-router-dom\";\nimport { firestore } from \"../../firebase/firebase\";\nimport { popularProductsCollections } from \"../../redux/popularProducts/popularProducts.action\";\nimport { selectSearchQuery } from \"../../redux/searchQuery/searchQuery.selector\";\nimport Product from \"../../components/products/product.component\";\nimport Spinner from \"../../components/common/spinner/spinner.component\";\nimport styles from \"./shop.module.scss\";\n\nconst Shop = ({\n  popularProductsCollections,\n  searchText\n}) => {\n  const {\n    category,\n    sex,\n    subcategory\n  } = useParams();\n  const [products, setProducts] = useState([]);\n  const [isLoading, setLoading] = useState(true);\n  const [spinner, setSpinner] = useState(true);\n\n  const queryProducts = () => {\n    let collection = firestore.collection(\"allProducts\");\n    if (sex) collection = collection.where(\"sexCategory\", \"==\", sex);\n    if (category) collection = collection.where(\"mainCategory\", \"==\", category);\n    if (subcategory) collection = collection.where(\"subCategory\", \"==\", subcategory);\n    collection.get().then(data => {\n      const array = [];\n      data.forEach(doc => {\n        const obj = {\n          name: doc.data().name,\n          price: doc.data().price,\n          imageUrl: doc.data().imageUrl,\n          id: doc.id\n        };\n        array.push(obj);\n      });\n      setProducts(array);\n      popularProductsCollections(array);\n      setLoading(false);\n    }).then(() => {\n      setSpinner(false);\n    });\n  };\n\n  const filteredProducts = () => {\n    return products.filter(product => {\n      return product.name;\n    });\n  };\n\n  useEffect(() => {\n    queryProducts();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Spinner, {\n    isLoading: spinner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.filteredProducts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, subcategory ? /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, subcategory.toUpperCase()) : /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }, \"All Clothes\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.productsGrid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, isLoading ? null : products.map(item => /*#__PURE__*/React.createElement(Product, {\n    key: item.id,\n    item: item,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 38\n    }\n  })))));\n};\n\nconst mapDispatchToProps = dispatch => ({\n  popularProductsCollections: collection => dispatch(popularProductsCollections(collection))\n});\n\nconst mapStateToProps = createStructuredSelector({\n  searchText: selectSearchQuery\n});\nexport default connect(mapStateToProps, mapDispatchToProps)(Shop);","map":{"version":3,"sources":["/Users/user/Desktop/REACT/pamoka/src/pages/shop/shop.component.jsx"],"names":["React","useEffect","useState","connect","createStructuredSelector","useParams","firestore","popularProductsCollections","selectSearchQuery","Product","Spinner","styles","Shop","searchText","category","sex","subcategory","products","setProducts","isLoading","setLoading","spinner","setSpinner","queryProducts","collection","where","get","then","data","array","forEach","doc","obj","name","price","imageUrl","id","push","filteredProducts","filter","product","toUpperCase","productsGrid","map","item","mapDispatchToProps","dispatch","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\n\nimport { useParams } from \"react-router-dom\";\nimport { firestore } from \"../../firebase/firebase\";\n\nimport { popularProductsCollections } from \"../../redux/popularProducts/popularProducts.action\";\n\nimport { selectSearchQuery } from \"../../redux/searchQuery/searchQuery.selector\";\n\nimport Product from \"../../components/products/product.component\";\nimport Spinner from \"../../components/common/spinner/spinner.component\";\n\nimport styles from \"./shop.module.scss\";\n\nconst Shop = ({ popularProductsCollections, searchText }) => {\n  const { category, sex, subcategory } = useParams();\n  const [products, setProducts] = useState([]);\n  const [isLoading, setLoading] = useState(true);\n  const [spinner, setSpinner] = useState(true);\n\n  const queryProducts = () => {\n    let collection = firestore.collection(\"allProducts\");\n\n    if (sex) collection = collection.where(\"sexCategory\", \"==\", sex);\n    if (category) collection = collection.where(\"mainCategory\", \"==\", category);\n    if (subcategory)\n      collection = collection.where(\"subCategory\", \"==\", subcategory);\n    collection\n      .get()\n      .then((data) => {\n        const array = [];\n        data.forEach((doc) => {\n          const obj = {\n            name: doc.data().name,\n            price: doc.data().price,\n            imageUrl: doc.data().imageUrl,\n            id: doc.id,\n          };\n          array.push(obj);\n        });\n        setProducts(array);\n        popularProductsCollections(array);\n        setLoading(false);\n      })\n      .then(() => {\n        setSpinner(false);\n      });\n  };\n\n  const filteredProducts = () => {\n    return products.filter(product => {\n      return product.name\n    })\n  }\n\n  useEffect(() => {\n    queryProducts();\n  }, []);\n\n  return (\n    <div>\n      <Spinner isLoading={spinner} />\n      <div className={styles.filteredProducts}>\n        {subcategory ? (\n          <h2>{subcategory.toUpperCase()}</h2>\n        ) : (\n          <h2>All Clothes</h2>\n        )}\n        <div className={styles.productsGrid}>\n          {isLoading\n            ? null\n            : products.map((item) => <Product key={item.id} item={item} />)}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst mapDispatchToProps = (dispatch) => ({\n  popularProductsCollections: (collection) =>\n    dispatch(popularProductsCollections(collection)),\n});\n\nconst mapStateToProps = createStructuredSelector({\n  searchText: selectSearchQuery,\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Shop);\n"]},"metadata":{},"sourceType":"module"}